### 第一节：体系

#### 介绍

**大模型**成为发展通用人工智能的重要途经。

系列：
- InternLM-7B
- InternLM-20B
- InternLM-20B
- InternLM-123B

区别：
- 不同参数量；
- 不同语境长度；
- 模型能力不同；
- 使用场景不同；

对比：
![image](https://github.com/lvoooo/internLM-learning/assets/16740247/88c5fc08-8957-408d-9199-008b2d92e1f1)

#### 从模型到应用

```plaintext
                                                                                                                                              _________N________> 部分参数微调_____
                                                                                                                                              |                                                                                        |
模型选型（初选、开源大模型）——>业务场景是否复杂——Y——>算力是否足够——Y——>继续训练/全参数微调——>是否需要环境交互——Y——>构建智能体——>模型评测——>模型部署
                                                                                            |                                                                                                                                          |                                                                                   ^
                                                                                           N                                                                                                                                        N                                                                                   |
                                                                                            |____________>_______________>__________________________|_______>__________________________|
```

与环境交互：调用外部API
#### 工具

- 数据：书生万卷（文本、图片、视频）、OpenDataLab（文本、图像、视频、音频、3D模型）
- 预训练：InternLM-Train
- 微调：XTuner
    -  增量续训：垂直领域知识？
    -  有监督微调：理解和遵循各种指令
- 部署：LMDeploy
- 评测：OpenCompass
- 应用：LagentAgentLego

  微调工具异同：
  - 不同的任务类型
  - 不同的数据格式
  - 不同的训练引擎
  - 优化加速
  - 算法支持
  - 硬件支持

 #### 评测

    ![image](https://github.com/lvoooo/internLM-learning/assets/16740247/6dee4a1b-7de5-4bd2-9870-3101556a68b4)

OpenCompass 评测体系
- 工具：分布式评测、提示词工程、评测数据库上报、评测榜单、评测报告
- 方法：主客观
- 能力：不同维度、不同能力
- 模型：基座模型、对话模型

  
#### 部署

大模型场景下

特点：
- 内存开销巨大
- 动态Shape
- 模型结构相对简单

挑战：
- 设备
  - 低存储设备（消费级显卡、移动端等）部署
- 推理
  - 如何加速 token 的生成速度
  - 如何解决动态shape，让推理可以不间断
  - 如何有效管理和利用内存
- 服务
  - 提升系统整体吞吐量
  - 降低请求的平均响应时间

技术点：
- 模型并行
- 低比特量化
-  Attention优化
-  计算和访存优化
-  Continuous Batching

LMDeploy 推理性能

![image](https://github.com/lvoooo/internLM-learning/assets/16740247/03e4091a-56bd-4db2-a421-bf40fc137a5f)


#### 智能体
- 最新信息和知识的获取
- 回复的可靠性
- 数学计算
- 工具使用和交互

Lagent ：框架
AgentLego：工具


